<?xml version="1.0" encoding="UTF-8"?>
<prov:document xmlns:prov="http://www.w3.org/ns/prov#"
               xmlns:dcterms="http://purl.org/dc/terms/"
               xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
               xmlns:ex="http://example.org/">

    <!-- Entidad: Tabla lnusers -->
    <prov:entity prov:id="ex:lnusers">
        <prov:label>Tabla lnusers</prov:label>
        <prov:type>prov:Collection</prov:type>
        <dcterms:description>
            Tabla unificada de usuarios resultante de la combinación de los espacios
            de identificadores de l2users (Books Dataset) y l1usersstage1 (Amazon Reviews).
            Representa el conjunto completo de usuarios normalizados dentro del modelo
            integrado. Cada registro mantiene el campo "user_id" único y consistente entre ambos orígenes.
        </dcterms:description>

        <prov:wasDerivedFrom prov:entity="ex:l2users"/>
        <prov:wasDerivedFrom prov:entity="ex:l1usersstage1"/>

        <!-- Miembros (columnas) -->
        <prov:hadMember prov:entity="ex:user_id"/>
    </prov:entity>

    <!-- Columna -->
    <prov:entity prov:id="ex:user_id">
        <prov:label>user_id</prov:label>
        <prov:type>xsd:integer</prov:type>
        <dcterms:description>
            Identificador unificado del usuario.
            Proviene directamente de los conjuntos l2users y l1usersstage1.
            No sufre transformación alguna, garantizando compatibilidad.
        </dcterms:description>
    </prov:entity>

    <!-- Actividad -->
    <prov:activity prov:id="ex:merge_lnusers"
                   prov:startTime="2025-11-04T10:00:00"
                   prov:endTime="2025-11-06T15:15:00">
        <prov:label>Unificación de identificadores de usuarios (lnusers)</prov:label>
        <dcterms:description>
            Proceso SQL ejecutado en PostgreSQL para crear la tabla lnusers
            unificando los identificadores de usuario de l2users y l1usersstage1
            mediante la operación UNION ALL. La operación mantiene la totalidad de
            los registros y no aplica transformaciones ni filtrado adicional.
        </dcterms:description>
        <prov:used prov:entity="ex:l2users"/>
        <prov:used prov:entity="ex:l1usersstage1"/>
    </prov:activity>

    <!-- Agentes -->
    <prov:agent prov:id="ex:integra2">
        <prov:label>Grupo Integra2</prov:label>
        <prov:type>prov:Organization</prov:type>
        <prov:role>Ejecutó y supervisó la unificación del espacio de usuarios.</prov:role>
    </prov:agent>

    <prov:agent prov:id="ex:postgresql_db">
        <prov:label>PostgreSQL Engine</prov:label>
        <prov:type>prov:SoftwareAgent</prov:type>
        <prov:role>Ejecutó la operación UNION ALL para combinar los registros de usuario.</prov:role>
    </prov:agent>

    <!-- Relaciones -->
    <prov:wasGeneratedBy prov:entity="ex:lnusers"
                         prov:activity="ex:merge_lnusers"/>
    <prov:wasAssociatedWith prov:activity="ex:merge_lnusers"
                            prov:agent="ex:integra2"/>
    <prov:wasAssociatedWith prov:activity="ex:merge_lnusers"
                            prov:agent="ex:postgresql_db"/>

</prov:document>
